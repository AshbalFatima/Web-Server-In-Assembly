# ðŸ“¡ Minimal Web Server in Assembly (x86_64 Linux)

This project is a low-level implementation of a web server written entirely in **x86_64 Assembly** using Linux system calls. It can handle both **GET** and **POST** requests and demonstrates raw socket handling, file I/O, and forking for concurrent client handling â€” all without libc!

---

## âš™ Features

- Handles **GET** requests and returns file contents.
- Handles **POST** requests and saves the request body to a file.
- Works with **concurrent connections** via `fork`.
- Uses raw Linux **syscalls only**, no C library functions.
- Fully null-terminated path extraction and buffer handling.
- Built-in HTTP 1.0 response formatting.

---

## ðŸ§  Concepts Demonstrated

- System call interface in Linux (`syscall`)
- Sockets API: `socket`, `bind`, `listen`, `accept`
- Process forking with `fork`
- File I/O: `open`, `read`, `write`, `close`
- Buffer management using `.space`, `.asciz`, and `.quad`
- Custom parsing of HTTP headers and bodies

---

## âš  Limitations (By Design)
- Does not support persistent connections (keep-alive).
- Only supports HTTP 1.0.
- No MIME type detection â€” serves everything as plain text.
- No request size limits or timeout handling.
- Not production-grade â€” built for learning and performance tracing.

---

## ðŸ§¾ Structure Overview

_start  
â”œâ”€â”€ socket â†’ bind â†’ listen  
â””â”€â”€ Loop:  
    â”œâ”€â”€ accept  
    â”œâ”€â”€ fork  
    â”œâ”€â”€ In child:  
    â”‚   â”œâ”€â”€ read request  
    â”‚   â”œâ”€â”€ parse GET/POST  
    â”‚   â”œâ”€â”€ handle file I/O  
    â”‚   â””â”€â”€ send HTTP response  
    â””â”€â”€ In parent:  
        â””â”€â”€ close client socket



---

## ðŸ“¥ POST Request Flow

1. Server extracts the file path from the `POST` request line.
2. It opens the specified file in write mode.
3. It skips the HTTP headers and extracts the request body.
4. The body is written to the file.
5. A `200 OK` response is returned.

---

## ðŸ“¤ GET Request Flow

1. Server extracts the file path from the `GET` request.
2. It opens the file and reads contents into memory.
3. The content is returned along with a `200 OK` HTTP header.

---

## ðŸ§µ Key Assembly Snippets
### Accept + Fork:
```asm
mov rax, 43      ; accept
syscall
mov r12, rax

mov rax, 57      ; fork
syscall
```

### Parse and store GET/POST paths:
```asm
lodsb            ; load byte
cmp al, ' '      ; look for space
je done_copying
```

### Write response:
```asm
mov rdi, 4       ; client socket fd
lea rsi, [msg]   ; HTTP/1.0 200 OK
mov rdx, 19
mov rax, 1       ; write
syscall
```

## ðŸ§± Memory Sections Used

- `.data`: for static strings and buffers  
- `.bss`-like `.space`: for runtime buffers  
- `.text`: code section only

---

## ðŸš€ How to Run

### Assemble and link:
```bash
nasm -f elf64 server.asm -o server.o
ld server.o -o server
```
### Run with root privileges (ports <1024):
```bash
sudo ./server
```
Send requests using a browser or curl.

## ðŸ“‚ File Overview

| Buffer Name   | Purpose                           |
|---------------|-----------------------------------|
| `buffer`      | Holds the entire incoming request |
| `open_path`   | Path extracted from URL           |
| `read_file`   | File content / POST body          |
| `bytes_read`  | Store number of bytes read        |
| `socket_addr` | `sockaddr_in` struct              |

## ðŸ§‘â€ðŸ’» Custom Test Environment: Simulating Concurrent Client Requests

To better understand the behavior of the server under load, I set up a custom environment that simulates multiple client connections. The environment uses a variety of system calls to establish socket connections, handle requests, and manage concurrent client handling via forking. The server was designed to respond to multiple clients simultaneously, mimicking real-world conditions where a server handles many requests at once.

The trace was generated by monitoring the system calls made during server operation, showing the sequence of connection handling, forking, and process closure. The analysis provided a deeper insight into the server's performance and resource utilization.

### Trace: Parent Process

```bash
[?] execve("/proc/self/fd/3", ["/proc/self/fd/3"], 0x71d7c9355a60 /* 0 vars */) = 0
[?] socket(AF_INET, SOCK_STREAM, IPPROTO_IP) = 3
[?] bind(3, {sa_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr("0.0.0.0")}, 16) = 0
[?] listen(3, 0)                            = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 7
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 8
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 9
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 10
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 11
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 12
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 13
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 14
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 15
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 16
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 17
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 18
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 19
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 20
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 21
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 22
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 23
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 24
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 25
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 26
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 27
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 28
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 29
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 30
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 31
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 32
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 33
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 34
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 35
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 36
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 37
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 38
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 39
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 40
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 41
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 42
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 43
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 44
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 45
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 46
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 47
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 48
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 49
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 50
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 51
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 52
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 53
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 54
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 55
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 56
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 57
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 58
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 59
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 60
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 61
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 62
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 63
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 64
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 65
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 66
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 67
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 68
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 69
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 70
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 71
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 72
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 73
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 74
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 75
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 76
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 77
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 78
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 79
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 80
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 81
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 82
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 83
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 84
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 85
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 86
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 87
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 88
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 89
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 90
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 91
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 92
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 93
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 94
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 95
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 96
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 97
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 98
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] fork()                                  = 99
[?] close(4)                                = 0
[?] accept(3, NULL, NULL)                   = 4
[?] --- SIGALRM {si_signo=SIGALRM, si_code=SI_KERNEL} ---
[?] +++ killed by SIGALRM +++

===== Result =====
[âœ“] Success

```

---

## ðŸ“ Conclusion

This project demonstrates the power and simplicity of working directly with low-level system calls in Linux. By implementing a minimal web server in x86_64 Assembly, we gain a deeper understanding of how web servers handle client requests, manage socket communication, and perform file I/O operations â€” all without relying on higher-level libraries like `libc`.

Through this exercise, we also explore key concepts such as:

- The intricacies of the `socket`, `bind`, and `listen` system calls for creating and managing connections.
- The use of `fork` to handle concurrent client connections in a child process.
- Low-level HTTP request parsing and handling, including GET and POST methods.
- Working with raw system resources to read and write data to files.

By developing this server, we build foundational skills for understanding how larger, more complex web servers work behind the scenes. It also serves as a stepping stone for further exploration into network programming and system-level development.

---

Thank you for checking out this project! Feel free to experiment with it, modify the code, and enhance its functionality. If you have any questions or suggestions, don't hesitate to reach out.

